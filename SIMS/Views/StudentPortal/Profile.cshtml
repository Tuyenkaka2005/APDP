@model SIMS.Models.Entities.Student
@{
    ViewData["Title"] = "Student Profile";
}

<div class="container-fluid">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index">Home</a></li>
            <li class="breadcrumb-item active">Student Profile</li>
        </ol>
    </nav>

    <!-- Header -->
    <div class="row mb-4">
        <div class="col-12">
            <h2><i class="bi bi-person-circle me-2"></i>Student Profile</h2>
        </div>
    </div>

    <div class="row">
        <!-- Basic information -->
        <div class="col-md-8">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i>Basic information</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Student code</label>
                            <p class="fw-bold">@Model.StudentCode</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Full name</label>
                            <p class="fw-bold">@Model.User.FullName</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Date of birth</label>
                            <p class="fw-bold">@Model.User.DateOfBirth?.ToString("dd/MM/yyyy")</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Email</label>
                            <p class="fw-bold">@Model.User.Email</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Phone number</label>
                            <p class="fw-bold">@(string.IsNullOrEmpty(Model.User.Phone) ? "Not updated" :
                                Model.User.Phone)</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Address</label>
                            <p class="fw-bold">@(string.IsNullOrEmpty(Model.User.Address) ? "Not updated" :
                                Model.User.Address)</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Education information -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="bi bi-book me-2"></i>Education information</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Training program</label>
                            <p class="fw-bold">@Model.AcademicPrograms.ProgramName</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Program code</label>
                            <p class="fw-bold">@Model.AcademicPrograms.ProgramCode</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Department</label>
                            <p class="fw-bold">@Model.Department?.DepartmentName</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Admission type</label>
                            <p class="fw-bold">@(string.IsNullOrEmpty(Model.AdmissionType) ? "Regular" :
                                Model.AdmissionType)</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted">Admission date</label>
                            <p class="fw-bold">@Model.AdmissionDate?.ToString("dd/MM/yyyy")</p>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted">Status</label>
                            <p>
                                @if (Model.Status == "Active")
                                {
                                    <span class="badge bg-success">Active</span>
                                }
                                else if (Model.Status == "Graduated")
                                {
                                    <span class="badge bg-info">Graduated</span>
                                }
                                else if (Model.Status == "Suspended")
                                {
                                    <span class="badge bg-danger">Suspended</span>
                                }
                                else
                                {
                                    <span class="badge bg-warning">@Model.Status</span>
                                }
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="col-md-4">
            <!-- Academic statistics -->
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Academic statistics</h5>
                </div>
                <div class="card-body">
                    <div class="text-center mb-3">
                        <h1 class="display-4 text-primary fw-bold">@Model.GPA.ToString("F2")</h1>
                        <p class="text-muted mb-0">Current GPA</p>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">Total credits:</span>
                        <span class="fw-bold">@Model.TotalCredits</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span class="text-muted">Required credits:</span>
                        <span class="fw-bold">@Model.AcademicPrograms.RequiredCredits</span>
                    </div>
                    <div class="progress mb-2" style="height: 25px;">
                        @{
                            double? progress = Model.AcademicPrograms.RequiredCredits > 0
                            ? (double)Model.TotalCredits / Model.AcademicPrograms.RequiredCredits * 100
                            : 0.0;
                            var progressClass = progress >= 75 ? "bg-success" : progress >= 50 ? "bg-info" : "bg-warning";
                        }
                        <div class="progress-bar @progressClass" role="progressbar"
                            style="width: @((progress ?? 0).ToString("F0"))%"
                            aria-valuenow="@((progress ?? 0).ToString("F0"))" aria-valuemin="0" aria-valuemax="100">
                            @((progress ?? 0).ToString("F0"))%
                        </div>
                    </div>
                    <small class="text-muted">
                        @((Model.AcademicPrograms.RequiredCredits - Model.TotalCredits)) credits left to graduate
                    </small>
                </div>
            </div>


        </div>
    </div>

    <!-- Action buttons -->
    <div class="row mt-4">
        <div class="col-12 text-center">
            <a asp-action="Index" class="btn btn-secondary">
                <i class="bi bi-arrow-left me-1"></i>Back
            </a>
            <a asp-action="MyCourses" class="btn btn-primary">
                <i class="bi bi-journal-text me-1"></i>View courses
            </a>
            <a asp-action="Grades" class="btn btn-success">
                <i class="bi bi-clipboard-check me-1"></i>View grades
            </a>
        </div>
    </div>
</div>